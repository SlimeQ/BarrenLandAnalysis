# BarrenLandAnalysis

## Problem Description
You have a farm of 400m by 600m where coordinates of the field are from (0, 0) to (399, 599). A portion of the farm is barren, and all the barren land is in the form of rectangles. Due to these rectangles of barren land, the remaining area of fertile land is in no particular shape. An area of fertile land is defined as the largest area of land that is not covered by any of the rectangles of barren land. 
Read input from STDIN. Print output to STDOUT 
### Input 
You are given a set of rectangles that contain the barren land. These rectangles are defined in a string, which consists of four integers separated by single spaces, with no additional spaces in the string. The first two integers are the coordinates of the bottom left corner in the given rectangle, and the last two integers are the coordinates of the top right corner. 
### Output 
Output all the fertile land area in square meters, sorted from smallest area to greatest, separated by a space. 

## Implementation

[View hosted instance on Google Cloud.](http://104.196.213.186/)

### Contents
- [Project Structure](#project-structure)  
- [Setup](#setup)
  - [Dependencies](#dependencies)
  - [Building](#building)
  - [Testing](#testing)
- [Usage](#usage)
  - [Command Line Interface Usage](#command-line-interface-usage)
  - [Server Usage](#server-usage)

### Project Structure
This project contains 3 subprojects, each with their own build configurations and generated jar files.
- shared (`shared/build/libs/BarrenLandAnalysis-shared.jar`)
  - A shared library which contains a `BarrenLandAnalyzer` class that can be used to process input.
- cli (`cli/build/libs/BarrenLandAnalysis-cli.jar`)
  - A command line application which reads from STDIN and writes to STDOUT.
- server (`server/build/libs/BarrenLandAnalysis-server.jar`)
  - A Spring Boot server which provides a friendly web interface for using the Barren Land Analyzer.

### Setup
#### Dependencies
A working Java installation is required.

#### Building
This project uses the gradle wrapper. To build, enter `$ ./gradlew build`

#### Testing
Tests will be run automatically on build, but to force tests to run you can enter `$ ./gradlew test`

### Usage
#### Command Line Interface Usage
The cli package reads from STDIN and writes to STDOUT. The program will immediately wait for a newline terminated input string and then output a string according to the project specifications. Optionally, you can generate an image file to visualize the resulting land grid by using the `-visualize <filename>` switch.

```
$ java -jar cli/build/libs/BarrenLandAnalysis-cli.jar -visualize sample_visualization.bmp
{"48 192 351 207", "48 392 351 407", "120 52 135 547", "260 52 275 547"}
22816 192608
```

![Visualization](https://github.com/SlimeQ/BarrenLandAnalysis/blob/master/sample_visualization.bmp)

**Note:** On Windows systems, copying and pasting sample input from the given docx into a Git bash terminal will result in an encoding error due to the “fancy” quotation marks. This should not be a concern in the standard CMD shell, on Linux systems, or any other UTF-8 shell.

#### Server Usage
The server package exposes BarrenLandAnalyzer functionality via a web page. To start the server, build the project and run the following command:
```$ java -jar server/build/libs/BarrenLandAnalysis-server.jar```

The server listens on port 8080 by default. This is a Spring-Boot server with two endpoints:

- `/` Serves a homepage with an AJAX form to interact with the server.
- `/analyze`
  - Accepts a POST request containing only a raw BarrenLandAnalysis input string.
    ```
    {“48 192 351 207”, “48 392 351 407”, “120 52 135 547”, “260 52 275 547”}
    ```
  - Returns a JSON object containing both the computed output string and the visualization image as a Base64 string.
    ```
    {
      "output":"22816 192608",
      "visualization":"data:image/png;base64, Qk22/AoAAAAAADYAAAAoAAAAkAEAAFgCAAABA..."
    }
    ```
    
 The server will also expose test reports generated by Junit. These will be located at `/reports/shared/index.html` and `/reports/server/index.html` and are linked to at the bottom of the homepage. For this function to work properly, the jar **must** be run from the project root since these files are located on the file system.
